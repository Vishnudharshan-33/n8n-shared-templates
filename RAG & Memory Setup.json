{
  "name": "RAG & Memory Setup",
  "nodes": [
    {
      "parameters": {
        "options": {}
      },
      "type": "@n8n/n8n-nodes-langchain.chatTrigger",
      "typeVersion": 1.3,
      "position": [
        -880,
        304
      ],
      "id": "6ce1a7bc-a09f-40da-a216-6d6a9f1bdc06",
      "name": "When chat message received",
      "webhookId": "9f669a40-4e6c-4b8d-b6a0-7fedfb6b082c"
    },
    {
      "parameters": {
        "options": {}
      },
      "type": "@n8n/n8n-nodes-langchain.agent",
      "typeVersion": 2.2,
      "position": [
        -576,
        304
      ],
      "id": "e783e245-4180-4069-aef4-c57cefb2177f",
      "name": "AI Agent"
    },
    {
      "parameters": {},
      "type": "@n8n/n8n-nodes-langchain.memoryPostgresChat",
      "typeVersion": 1.3,
      "position": [
        -496,
        496
      ],
      "id": "ee4fcd31-b18e-4763-a164-031c1a7e2327",
      "name": "Postgres Chat Memory",
      "credentials": {
        "postgres": {
          "id": "qsxR8JPjU7ntsOQT",
          "name": "Postgres account"
        }
      }
    },
    {
      "parameters": {
        "options": {}
      },
      "type": "@n8n/n8n-nodes-langchain.lmChatGoogleGemini",
      "typeVersion": 1,
      "position": [
        -624,
        608
      ],
      "id": "d400880b-b930-4fa6-99d1-5c01ddb3aa4f",
      "name": "Google Gemini Chat Model",
      "credentials": {
        "googlePalmApi": {
          "id": "IXOxUFuMuUBER8Pf",
          "name": "Google Gemini(PaLM) Api account"
        }
      }
    },
    {
      "parameters": {
        "mode": "retrieve-as-tool",
        "toolDescription": "use this tool you get this customer support ",
        "tableName": {
          "__rl": true,
          "value": "documents",
          "mode": "list",
          "cachedResultName": "documents"
        },
        "options": {}
      },
      "type": "@n8n/n8n-nodes-langchain.vectorStoreSupabase",
      "typeVersion": 1.3,
      "position": [
        -320,
        496
      ],
      "id": "55234056-fb2d-4a20-ace8-ade6d2d46853",
      "name": "Supabase Vector Store",
      "credentials": {
        "supabaseApi": {
          "id": "vkuPmWIVCZcV7dyO",
          "name": "Supabase account"
        }
      }
    },
    {
      "parameters": {
        "operation": "download",
        "fileId": {
          "__rl": true,
          "value": "1ui88HISrbZlsLM7rwnTpq6TZIARQsyeE",
          "mode": "list",
          "cachedResultName": "Customer Support Knowledge based.pdf",
          "cachedResultUrl": "https://drive.google.com/file/d/1ui88HISrbZlsLM7rwnTpq6TZIARQsyeE/view?usp=drivesdk"
        },
        "options": {}
      },
      "type": "n8n-nodes-base.googleDrive",
      "typeVersion": 3,
      "position": [
        -64,
        304
      ],
      "id": "e7fb08e4-1eef-4ab6-8816-d4f35c2bcb0a",
      "name": "Download file",
      "credentials": {
        "googleDriveOAuth2Api": {
          "id": "434OItnodWrjrwDD",
          "name": "Google Drive account"
        }
      }
    },
    {
      "parameters": {
        "mode": "insert",
        "tableName": {
          "__rl": true,
          "value": "documents",
          "mode": "list",
          "cachedResultName": "documents"
        },
        "options": {}
      },
      "type": "@n8n/n8n-nodes-langchain.vectorStoreSupabase",
      "typeVersion": 1.3,
      "position": [
        176,
        304
      ],
      "id": "a0e9a366-72b4-484f-b150-85d5e0c87852",
      "name": "Supabase Vector Store1",
      "credentials": {
        "supabaseApi": {
          "id": "vkuPmWIVCZcV7dyO",
          "name": "Supabase account"
        }
      }
    },
    {
      "parameters": {
        "dataType": "binary",
        "options": {}
      },
      "type": "@n8n/n8n-nodes-langchain.documentDefaultDataLoader",
      "typeVersion": 1.1,
      "position": [
        336,
        496
      ],
      "id": "c2e121ab-9630-4efa-9158-a99ea97b8aa0",
      "name": "Default Data Loader"
    },
    {
      "parameters": {
        "options": {}
      },
      "type": "@n8n/n8n-nodes-langchain.embeddingsOpenAi",
      "typeVersion": 1.2,
      "position": [
        128,
        496
      ],
      "id": "c87dc3fd-af1a-4a64-a4ab-2f6f5b3e0949",
      "name": "Embeddings OpenAI",
      "credentials": {
        "openAiApi": {
          "id": "iYFQuHpHjFQt5NK5",
          "name": "OpenAi account"
        }
      }
    },
    {
      "parameters": {
        "options": {}
      },
      "type": "@n8n/n8n-nodes-langchain.embeddingsOpenAi",
      "typeVersion": 1.2,
      "position": [
        -400,
        640
      ],
      "id": "3db1a3b2-e457-4329-923d-daba438f1de6",
      "name": "Embeddings OpenAI1",
      "credentials": {
        "openAiApi": {
          "id": "iYFQuHpHjFQt5NK5",
          "name": "OpenAi account"
        }
      }
    },
    {
      "parameters": {
        "content": "## Query Retrieval & Conversational Memory :\n### The Chat Trigger node receives user input, which is embedded using the OpenAI Embeddings node; this embedding is used by the Supabase Vector Store node to perform a similarity search and retrieve matching documents, while the Postgres Chat Memory node records both the user query and agent response to maintain conversation context.",
        "height": 336,
        "width": 512,
        "color": 5
      },
      "type": "n8n-nodes-base.stickyNote",
      "position": [
        -720,
        112
      ],
      "typeVersion": 1,
      "id": "4cd91665-7e18-4b24-9018-20de3dde11d9",
      "name": "Sticky Note"
    },
    {
      "parameters": {
        "content": "## Document Ingestion & Embedding: \n### The Google Drive node downloads the file, the Default Data Loader extracts text, the OpenAI Embeddings node generates vector embeddings, and the Supabase Vector Store node saves these embeddings to the database.",
        "height": 304,
        "width": 496,
        "color": 6
      },
      "type": "n8n-nodes-base.stickyNote",
      "position": [
        80,
        160
      ],
      "typeVersion": 1,
      "id": "1ccfaa1b-0204-405c-aa50-b4464ab318a6",
      "name": "Sticky Note1"
    }
  ],
  "pinData": {},
  "connections": {
    "When chat message received": {
      "main": [
        [
          {
            "node": "AI Agent",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Postgres Chat Memory": {
      "ai_memory": [
        [
          {
            "node": "AI Agent",
            "type": "ai_memory",
            "index": 0
          }
        ]
      ]
    },
    "Google Gemini Chat Model": {
      "ai_languageModel": [
        [
          {
            "node": "AI Agent",
            "type": "ai_languageModel",
            "index": 0
          }
        ]
      ]
    },
    "Supabase Vector Store": {
      "ai_tool": [
        [
          {
            "node": "AI Agent",
            "type": "ai_tool",
            "index": 0
          }
        ]
      ]
    },
    "Download file": {
      "main": [
        [
          {
            "node": "Supabase Vector Store1",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Default Data Loader": {
      "ai_document": [
        [
          {
            "node": "Supabase Vector Store1",
            "type": "ai_document",
            "index": 0
          }
        ]
      ]
    },
    "Embeddings OpenAI": {
      "ai_embedding": [
        [
          {
            "node": "Supabase Vector Store1",
            "type": "ai_embedding",
            "index": 0
          }
        ]
      ]
    },
    "Embeddings OpenAI1": {
      "ai_embedding": [
        [
          {
            "node": "Supabase Vector Store",
            "type": "ai_embedding",
            "index": 0
          }
        ]
      ]
    }
  },
  "active": false,
  "settings": {
    "executionOrder": "v1"
  },
  "versionId": "16516cbf-5b21-4cf1-98aa-65a7aeaad84d",
  "meta": {
    "templateCredsSetupCompleted": true,
    "instanceId": "f2b76805e187b39eab1fc3a89c15abcaead8149f34c3eaa5abbbba9c351e5cb4"
  },
  "id": "ulMiuFMM5xr1ht1E",
  "tags": []
}